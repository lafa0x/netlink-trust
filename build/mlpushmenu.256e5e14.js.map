{"version":3,"sources":["mlpushmenu.js"],"names":["window","classReg","className","RegExp","hasClass","addClass","removeClass","toggleClass","elem","c","document","documentElement","classList","contains","add","remove","test","replace","classie","has","toggle","define","amd","closest","e","classname","parentNode","mlPushMenu","el","trigger","options","extend","a","b","key","hasOwnProperty","defaults","support","Modernizr","csstransforms3d","_init","prototype","type","levelSpacing","backClass","open","level","wrapper","getElementById","levels","Array","slice","call","querySelectorAll","self","check","forEach","i","setAttribute","getLevelDepth","id","waypoint","cnt","indexOf","menuItems","levelBack","eventtype","navigator","userAgent","vendor","opera","substr","_initEvents","addEventListener","ev","stopPropagation","preventDefault","_resetMenu","_openMenu","hasParent","target","srcElement","bodyClickFn","removeEventListener","subLevel","querySelector","getAttribute","_closeMenu","levelFactor","translateVal","offsetWidth","_setTransform","len","length","levelEl","_toggleLevels","val","Number"],"mappings":"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","file":"mlpushmenu.256e5e14.js","sourceRoot":"../src","sourcesContent":["\n\n/*!\n * classie - class helper functions\n * from bonzo https://github.com/ded/bonzo\n * \n * classie.has( elem, 'my-class' ) -> true/false\n * classie.add( elem, 'my-new-class' )\n * classie.remove( elem, 'my-unwanted-class' )\n * classie.toggle( elem, 'my-class' )\n */\n\n/*jshint browser: true, strict: true, undef: true */\n/*global define: false */\n\n( function( window ) {\n\n    'use strict';\n    \n    // class helper functions from bonzo https://github.com/ded/bonzo\n    \n    function classReg( className ) {\n      return new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\");\n    }\n    \n    // classList support for class management\n    // altho to be fair, the api sucks because it won't accept multiple classes at once\n    var hasClass, addClass, removeClass;\n    \n    if ( 'classList' in document.documentElement ) {\n      hasClass = function( elem, c ) {\n        return elem.classList.contains( c );\n      };\n      addClass = function( elem, c ) {\n        elem.classList.add( c );\n      };\n      removeClass = function( elem, c ) {\n        elem.classList.remove( c );\n      };\n    }\n    else {\n      hasClass = function( elem, c ) {\n        return classReg( c ).test( elem.className );\n      };\n      addClass = function( elem, c ) {\n        if ( !hasClass( elem, c ) ) {\n          elem.className = elem.className + ' ' + c;\n        }\n      };\n      removeClass = function( elem, c ) {\n        elem.className = elem.className.replace( classReg( c ), ' ' );\n      };\n    }\n    \n    function toggleClass( elem, c ) {\n      var fn = hasClass( elem, c ) ? removeClass : addClass;\n      fn( elem, c );\n    }\n    \n    var classie = {\n      // full names\n      hasClass: hasClass,\n      addClass: addClass,\n      removeClass: removeClass,\n      toggleClass: toggleClass,\n      // short names\n      has: hasClass,\n      add: addClass,\n      remove: removeClass,\n      toggle: toggleClass\n    };\n    \n    // transport\n    if ( typeof define === 'function' && define.amd ) {\n      // AMD\n      define( classie );\n    } else {\n      // browser global\n      window.classie = classie;\n    }\n    \n    })( window );\n\n\n\n\n\n\n\n\n\n\n/**\n * mlpushmenu.js v1.0.0\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2013, Codrops\n * http://www.codrops.com\n */\n ( function( window ) {\n\t\n\t'use strict';\n\n\tfunction extend( a, b ) {\n\t\tfor( var key in b ) { \n\t\t\tif( b.hasOwnProperty( key ) ) {\n\t\t\t\ta[key] = b[key];\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\n\t// taken from https://github.com/inuyaksa/jquery.nicescroll/blob/master/jquery.nicescroll.js\n\tfunction hasParent( e, id ) {\n\t\tif (!e) return false;\n\t\tvar el = e.target||e.srcElement||e||false;\n\t\twhile (el && el.id != id) {\n\t\t\tel = el.parentNode||false;\n\t\t}\n\t\treturn (el!==false);\n\t}\n\n\t// returns the depth of the element \"e\" relative to element with id=id\n\t// for this calculation only parents with classname = waypoint are considered\n\tfunction getLevelDepth( e, id, waypoint, cnt ) {\n\t\tcnt = cnt || 0;\n\t\tif ( e.id.indexOf( id ) >= 0 ) return cnt;\n\t\tif( classie.has( e, waypoint ) ) {\n\t\t\t++cnt;\n\t\t}\n\t\treturn e.parentNode && getLevelDepth( e.parentNode, id, waypoint, cnt );\n\t}\n\n\t// http://coveroverflow.com/a/11381730/989439\n\tfunction mobilecheck() {\n\t\tvar check = false;\n\t\t(function(a){if(/(android|ipad|playbook|silk|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n\t\treturn check;\n\t}\n\n\t// returns the closest element to 'e' that has class \"classname\"\n\tfunction closest( e, classname ) {\n\t\tif( classie.has( e, classname ) ) {\n\t\t\treturn e;\n\t\t}\n\t\treturn e.parentNode && closest( e.parentNode, classname );\n\t}\n\n\tfunction mlPushMenu( el, trigger, options ) {\t\n\t\tthis.el = el;\n\t\tthis.trigger = trigger;\n\t\tthis.options = extend( this.defaults, options );\n\t\t// support 3d transforms\n\t\tthis.support = Modernizr.csstransforms3d;\n\t\tif( this.support ) {\n\t\t\tthis._init();\n\t\t}\n\t}\n\n\tmlPushMenu.prototype = {\n\t\tdefaults : {\n\t\t\t// overlap: there will be a gap between open levels\n\t\t\t// cover: the open levels will be on top of any previous open level\n\t\t\ttype : 'overlap', // overlap || cover\n\t\t\t// space between each overlaped level\n\t\t\tlevelSpacing : 40,\n\t\t\t// classname for the element (if any) that when clicked closes the current level\n\t\t\tbackClass : 'mp-back'\n\t\t},\n\t\t_init : function() {\n\t\t\t// if menu is open or not\n\t\t\tthis.open = false;\n\t\t\t// level depth\n\t\t\tthis.level = 0;\n\t\t\t// the moving wrapper\n\t\t\tthis.wrapper = document.getElementById( 'mp-pusher' );\n\t\t\t// the mp-level elements\n\t\t\tthis.levels = Array.prototype.slice.call( this.el.querySelectorAll( 'div.mp-level' ) );\n\t\t\t// save the depth of each of these mp-level elements\n\t\t\tvar self = this;\n\t\t\tthis.levels.forEach( function( el, i ) { el.setAttribute( 'data-level', getLevelDepth( el, self.el.id, 'mp-level' ) ); } );\n\t\t\t// the menu items\n\t\t\tthis.menuItems = Array.prototype.slice.call( this.el.querySelectorAll( 'li' ) );\n\t\t\t// if type == \"cover\" these will serve as hooks to move back to the previous level\n\t\t\tthis.levelBack = Array.prototype.slice.call( this.el.querySelectorAll( '.' + this.options.backClass ) );\n\t\t\t// event type (if mobile use touch events)\n\t\t\tthis.eventtype = mobilecheck() ? 'touchstart' : 'click';\n\t\t\t// add the class mp-overlap or mp-cover to the main element depending on options.type\n\t\t\tclassie.add( this.el, 'mp-' + this.options.type );\n\t\t\t// initialize / bind the necessary events\n\t\t\tthis._initEvents();\n\t\t},\n\t\t_initEvents : function() {\n\t\t\tvar self = this;\n\n\t\t\t// the menu should close if clicking somewhere on the body\n\t\t\tvar bodyClickFn = function( el ) {\n\t\t\t\tself._resetMenu();\n\t\t\t\tel.removeEventListener( self.eventtype, bodyClickFn );\n\t\t\t};\n\n\t\t\t// open (or close) the menu\n\t\t\tthis.trigger.addEventListener( this.eventtype, function( ev ) {\n\t\t\t\tev.stopPropagation();\n\t\t\t\tev.preventDefault();\n\t\t\t\tif( self.open ) {\n\t\t\t\t\tself._resetMenu();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tself._openMenu();\n\t\t\t\t\t// the menu should close if clicking somewhere on the body (excluding clicks on the menu)\n\t\t\t\t\tdocument.addEventListener( self.eventtype, function( ev ) {\n\t\t\t\t\t\tif( self.open && !hasParent( ev.target, self.el.id ) ) {\n\t\t\t\t\t\t\tbodyClickFn( this );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// opening a sub level menu\n\t\t\tthis.menuItems.forEach( function( el, i ) {\n\t\t\t\t// check if it has a sub level\n\t\t\t\tvar subLevel = el.querySelector( 'div.mp-level' );\n\t\t\t\tif( subLevel ) {\n\t\t\t\t\tel.querySelector( 'a' ).addEventListener( self.eventtype, function( ev ) {\n\t\t\t\t\t\t//ev.preventDefault();\n\t\t\t\t\t\tvar level = closest( el, 'mp-level' ).getAttribute( 'data-level' );\n\t\t\t\t\t\tif( self.level <= level ) {\n\t\t\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t\t\tclassie.add( closest( el, 'mp-level' ), 'mp-level-overlay' );\n\t\t\t\t\t\t\tself._openMenu( subLevel );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// closing the sub levels :\n\t\t\t// by clicking on the visible part of the level element\n\t\t\tthis.levels.forEach( function( el, i ) {\n\t\t\t\tel.addEventListener( self.eventtype, function( ev ) {\n\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\tvar level = el.getAttribute( 'data-level' );\n\t\t\t\t\tif( self.level > level ) {\n\t\t\t\t\t\tself.level = level;\n\t\t\t\t\t\tself._closeMenu();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// by clicking on a specific element\n\t\t\tthis.levelBack.forEach( function( el, i ) {\n\t\t\t\tel.addEventListener( self.eventtype, function( ev ) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tvar level = closest( el, 'mp-level' ).getAttribute( 'data-level' );\n\t\t\t\t\tif( self.level <= level ) {\n\t\t\t\t\t\tev.stopPropagation();\n\t\t\t\t\t\tself.level = closest( el, 'mp-level' ).getAttribute( 'data-level' ) - 1;\n\t\t\t\t\t\tself.level === 0 ? self._resetMenu() : self._closeMenu();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\t\n\t\t},\n\t\t_openMenu : function( subLevel ) {\n\t\t\t// increment level depth\n\t\t\t++this.level;\n\n\t\t\t// move the main wrapper\n\t\t\tvar levelFactor = ( this.level - 1 ) * this.options.levelSpacing,\n\t\t\t\ttranslateVal = this.options.type === 'overlap' ? this.el.offsetWidth + levelFactor : this.el.offsetWidth;\n\t\t\t\n\t\t\tthis._setTransform( 'translate3d(' + translateVal + 'px,0,0)' );\n\n\t\t\tif( subLevel ) {\n\t\t\t\t// reset transform for sublevel\n\t\t\t\tthis._setTransform( '', subLevel );\n\t\t\t\t// need to reset the translate value for the level menus that have the same level depth and are not open\n\t\t\t\tfor( var i = 0, len = this.levels.length; i < len; ++i ) {\n\t\t\t\t\tvar levelEl = this.levels[i];\n\t\t\t\t\tif( levelEl != subLevel && !classie.has( levelEl, 'mp-level-open' ) ) {\n\t\t\t\t\t\tthis._setTransform( 'translate3d(-100%,0,0) translate3d(' + -1*levelFactor + 'px,0,0)', levelEl );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// add class mp-pushed to main wrapper if opening the first time\n\t\t\tif( this.level === 1 ) {\n\t\t\t\t//classie.add( this.wrapper, 'mp-pushed' );\n\t\t\t\tthis.open = true;\n\t\t\t}\n\t\t\t// add class mp-level-open to the opening level element\n\t\t\tclassie.add( subLevel || this.levels[0], 'mp-level-open' );\n\t\t},\n\t\t// close the menu\n\t\t_resetMenu : function() {\n\t\t\tthis._setTransform('translate3d(0,0,0)');\n\t\t\tthis.level = 0;\n\t\t\t// remove class mp-pushed from main wrapper\n\t\t\tclassie.remove( this.wrapper, 'mp-pushed' );\n\t\t\tthis._toggleLevels();\n\t\t\tthis.open = false;\n\t\t},\n\t\t// close sub menus\n\t\t_closeMenu : function() {\n\t\t\tvar translateVal = this.options.type === 'overlap' ? this.el.offsetWidth + ( this.level - 1 ) * this.options.levelSpacing : this.el.offsetWidth;\n\t\t\tthis._setTransform( 'translate3d(' + translateVal + 'px,0,0)' );\n\t\t\tthis._toggleLevels();\n\t\t},\n\t\t// translate the el\n\t\t_setTransform : function( val, el ) {\n\t\t\t// el = el || this.wrapper;\n\t\t\t// el.style.WebkitTransform = val;\n\t\t\t// el.style.MozTransform = val;\n\t\t\t// el.style.transform = val;\n\t\t},\n\t\t// removes classes mp-level-open from closing levels\n\t\t_toggleLevels : function() {\n\t\t\tfor( var i = 0, len = this.levels.length; i < len; ++i ) {\n\t\t\t\tvar levelEl = this.levels[i];\n\t\t\t\tif( levelEl.getAttribute( 'data-level' ) >= this.level + 1 ) {\n\t\t\t\t\tclassie.remove( levelEl, 'mp-level-open' );\n\t\t\t\t\tclassie.remove( levelEl, 'mp-level-overlay' );\n\t\t\t\t}\n\t\t\t\telse if( Number( levelEl.getAttribute( 'data-level' ) ) == this.level ) {\n\t\t\t\t\tclassie.remove( levelEl, 'mp-level-overlay' );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// add to global namespace\n\twindow.mlPushMenu = mlPushMenu;\n\n} )( window );"]}